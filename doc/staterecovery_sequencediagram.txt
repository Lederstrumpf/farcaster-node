title State Recovery Procedure

// TODO: remove walletd once it's stateless
participant walletd
participant databased
participant farcasterd
participant cli

== State Recovery Procedure
entryspacing 0.8
farcasterd -> databased : launch
cli -> farcasterd : RetrieveAllCheckpointInfo
farcasterd -> databased : RetrieveAllCheckpointInfo
databased -> farcasterd : CheckpointList
farcasterd -> cli : CheckpointList
cli -> farcasterd : RestoreCheckpoint
farcasterd -> databased : RestoreCheckpoint
databased -> walletd : Checkpoint
