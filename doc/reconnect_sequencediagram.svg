<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1109" height="848"><desc>title%20Peer%20Reconnect%20Procedure%0A%0Aparticipant%20t_peerd_run%0Aparticipant%20t_peerd_recv%0Aparticipant%20m_peerd_recv%0Aparticipant%20m_peerd_run%0Aparticipant%20m_farcasterd%0Aparticipant%20m_swapd%0A%0A%3D%3DPeer%20reconnect%20procedure%3D%3D%0Am_swapd%20-%3E%20m_farcasterd%20%3A%20Ctl%20PeerdUnreachable%0Am_farcasterd%20-%3E%20m_peerd_run%20%3A%20Ctl%20Terminate%0Am_peerd_run%20-%3E%20m_farcasterd%20%3A%20Ctl%20PeerdTerminated%0Am_peerd_recv%20-%3E%20m_peerd_recv%3A%20terminate%0Am_peerd_run%20-%3E%20m_peerd_run%3A%20terminate%0At_peerd_recv%20-%3E%20t_peerd_run%20%3A%20Ctl%20PeerdListenerRuntimeShutdown%0At_peerd_recv%20-%3E%20t_peerd_recv%3A%20terminate%0A%3D%3DTaker%20peerd%20restarts%20connection%2C%20connects%20to%20maker%20forked%20peerd%3D%3D%0Am_peerd_run%20-%3E%20m_peerd_run%20%3A%20forked%20from%20listener%0At_peerd_run%20-%3E%20m_peerd_run%20%3A%20NodeId%20(raw)%0At_peerd_run%20-%3E%20t_peerd_recv%3A%20spawn%0Am_peerd_run%20-%3E%20m_farcasterd%3A%20Ctl%20Hello%0Am_farcasterd%20-%3E%20m_swapd%3A%20Ctl%20PeerdReconnected%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1109" height="848"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="410.61357984951553" y="22.6179738" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Peer Reconnect Procedure</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 67.649658982 88.511670804 L 67.649658982 848.475590484" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 367.6260527796562 88.511670804 L 367.6260527796562 848.475590484" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 514.0253730324746 88.511670804 L 514.0253730324746 848.475590484" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 661.274691759414 88.511670804 L 661.274691759414 848.475590484" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 849.7177603617578 88.511670804 L 849.7177603617578 848.475590484" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1051.5274976652734 88.511670804 L 1051.5274976652734 848.475590484" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 7.539324600000008 47.799317964000004 L 127.759993364 47.799317964000004 L 127.759993364 88.511670804 L 7.539324600000008 88.511670804 L 7.539324600000008 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="23.899658982000005" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">t_peerd_run</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 304.0990504594238 47.799317964000004 L 431.1530550998886 47.799317964000004 L 431.1530550998886 88.511670804 L 304.0990504594238 88.511670804 L 304.0990504594238 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="320.4593848414238" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">t_peerd_recv</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 446.23170429988863 47.799317964000004 L 581.8190417650605 47.799317964000004 L 581.8190417650605 88.511670804 L 446.23170429988863 88.511670804 L 446.23170429988863 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="462.59203868188865" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">m_peerd_recv</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 596.8976909650605 47.799317964000004 L 725.6516925537676 47.799317964000004 L 725.6516925537676 88.511670804 L 596.8976909650605 88.511670804 L 596.8976909650605 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="613.2580253470605" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">m_peerd_run</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 785.3240931550507 47.799317964000004 L 914.1114275684648 47.799317964000004 L 914.1114275684648 88.511670804 L 785.3240931550507 88.511670804 L 785.3240931550507 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="801.6844275370507" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">m_farcasterd</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1000.7338289326874 47.799317964000004 L 1102.3211663978593 47.799317964000004 L 1102.3211663978593 88.511670804 L 1000.7338289326874 88.511670804 L 1000.7338289326874 47.799317964000004 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1017.0941633146874" y="73.43302160400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">m_swapd</text></g></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 7.5393246000000005 130.98319938400002 L 1101.4606754 130.98319938400002 M 7.5393246000000005 136.00941578400003 L 1101.4606754 136.00941578400003 M 7.5393246000000005 141.03563218400004 L 1101.4606754 141.03563218400004" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 438.6898941717578 118.668969204 L 670.3101058282422 118.668969204 L 670.3101058282422 153.34986236400002 L 438.6898941717578 153.34986236400002 Z" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="459.8000030517578" y="139.77907808400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Peer reconnect procedure</text></g><g><g><rect fill="white" stroke="none" x="868.9941629323437" y="175.967836164" width="163.25693216234376" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="871.2559603123436" y="189.538620444" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl PeerdUnreachable</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1051.5274976652734 195.57008012400001 L 862.1325148697578 195.57008012400001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(849.7177603617578,195.57008012400001) translate(-849.7177603617578,-195.57008012400001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 862.2833013617578 189.28730962400002 L 849.7177603617578 195.57008012400001 L 862.2833013617578 201.852850624 Z"/></g></g><g><g><rect fill="white" stroke="none" x="704.5010950929395" y="218.188053924" width="101.99026193529296" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="706.7628924729395" y="231.758838204" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl Terminate</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 849.7177603617578 237.790297884 L 673.689446267414 237.790297884" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(661.274691759414,237.790297884) translate(-661.274691759414,-237.790297884)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 673.8402327594141 231.507527384 L 661.274691759414 237.790297884 L 673.8402327594141 244.073068384 Z"/></g></g><g><g><rect fill="white" stroke="none" x="679.1177599794141" y="260.408271684" width="152.75693216234376" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="681.3795573594141" y="273.97905596400005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl PeerdTerminated</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 661.274691759414 280.010515644 L 837.3030058537578 280.010515644" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(849.7177603617578,280.010515644) translate(-849.7177603617578,-280.010515644)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 837.1522193617577 273.727745144 L 849.7177603617578 280.010515644 L 837.1522193617577 286.29328614400004 Z"/></g></g><g><g><rect fill="white" stroke="none" x="531.8684412524747" y="302.628489444" width="76.55692758470703" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="534.1302386324746" y="316.199273724" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">terminate</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 514.0253730324746 322.23073340400003 L 574.3399698324746 322.23073340400003 L 574.3399698324746 341.83297736400004 L 526.4401275404746 341.83297736400004" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(514.0253730324746,341.83297736400004) translate(-514.0253730324746,-341.83297736400004)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 526.5909140324746 335.550206864 L 514.0253730324746 341.83297736400004 L 526.5909140324746 348.11574786400007 Z"/></g></g><g><g><rect fill="white" stroke="none" x="679.1177599794141" y="364.450951164" width="76.55692758470703" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="681.3795573594141" y="378.021735444" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">terminate</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 661.274691759414 384.053195124 L 721.5892885594141 384.053195124 L 721.5892885594141 403.655439084 L 673.689446267414 403.655439084" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(661.274691759414,403.655439084) translate(-661.274691759414,-403.655439084)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 673.8402327594141 397.372668584 L 661.274691759414 403.655439084 L 673.8402327594141 409.93820958400005 Z"/></g></g><g><g><rect fill="white" stroke="none" x="85.49272720199998" y="426.27341288400004" width="264.29025735765623" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="87.75452458199999" y="439.8441971640001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl PeerdListenerRuntimeShutdown</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 367.6260527796562 445.87565684400005 L 80.06441349 445.87565684400005" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(67.649658982,445.87565684400005) translate(-67.649658982,-445.87565684400005)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 80.215199982 439.592886344 L 67.649658982 445.87565684400005 L 80.215199982 452.1584273440001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="385.4691209996562" y="468.49363064400006" width="76.55692758470703" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="387.7309183796562" y="482.06441492400006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">terminate</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 367.6260527796562 488.0958746040001 L 427.9406495796562 488.0958746040001 L 427.9406495796562 507.6981185640001 L 380.0408072876562 507.6981185640001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(367.6260527796562,507.6981185640001) translate(-367.6260527796562,-507.6981185640001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 380.1915937796562 501.41534806400006 L 367.6260527796562 507.6981185640001 L 380.1915937796562 513.980889064 Z"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 7.5393246000000005 542.6303225440001 L 1101.4606754 542.6303225440001 M 7.5393246000000005 547.6565389440001 L 1101.4606754 547.6565389440001 M 7.5393246000000005 552.682755344 L 1101.4606754 552.682755344" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 295.13989112 530.3160923640002 L 813.86010888 530.3160923640002 L 813.86010888 564.9969855240001 L 295.13989112 564.9969855240001 Z" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="316.25" y="551.4262012440001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Taker peerd restarts connection, connects to maker forked peerd</text></g><g><g><rect fill="white" stroke="none" x="679.1177599794141" y="587.6149593240001" width="149.39026346117188" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="681.3795573594141" y="601.1857436040001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">forked from listener</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 661.274691759414 607.2172032840001 L 721.5892885594141 607.2172032840001 L 721.5892885594141 626.8194472440001 L 673.689446267414 626.8194472440001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(661.274691759414,626.8194472440001) translate(-661.274691759414,-626.8194472440001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 673.8402327594141 620.5366767440001 L 661.274691759414 626.8194472440001 L 673.8402327594141 633.1022177440001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="314.667045166" y="649.4374210440001" width="99.59026040941406" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="316.928842546" y="663.0082053240001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">NodeId (raw)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 67.649658982 669.0396650040001 L 648.8599372514141 669.0396650040001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(661.274691759414,669.0396650040001) translate(-661.274691759414,-669.0396650040001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 648.709150759414 662.7568945040001 L 661.274691759414 669.0396650040001 L 648.709150759414 675.322435504 Z"/></g></g><g><g><rect fill="white" stroke="none" x="191.75939170700488" y="691.657638804" width="51.756928347646486" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="194.02118908700487" y="705.228423084" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">spawn</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 67.649658982 711.259882764 L 355.21129827165623 711.259882764" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(367.6260527796562,711.259882764) translate(-367.6260527796562,-711.259882764)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 355.0605117796562 704.9771122640001 L 367.6260527796562 711.259882764 L 355.0605117796562 717.542653264 Z"/></g></g><g><g><rect fill="white" stroke="none" x="722.2844279176466" y="733.877856564" width="66.4235962858789" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="724.5462252976465" y="747.448640844" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl Hello</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 661.274691759414 753.480100524 L 837.3030058537578 753.480100524" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(849.7177603617578,753.480100524) translate(-849.7177603617578,-753.480100524)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 837.1522193617577 747.197330024 L 849.7177603617578 753.480100524 L 837.1522193617577 759.762871024 Z"/></g></g><g><g><rect fill="white" stroke="none" x="867.5608285817577" y="776.098074324" width="166.12360086351563" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="869.8226259617577" y="789.668858604" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl PeerdReconnected</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 849.7177603617578 795.700318284 L 1039.1127431572734 795.700318284" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(1051.5274976652734,795.700318284) translate(-1051.5274976652734,-795.700318284)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1038.9619566652734 789.417547784 L 1051.5274976652734 795.700318284 L 1038.9619566652734 801.983088784 Z"/></g></g></g><g/><g/><g/><g/><g/><g/></g></svg>